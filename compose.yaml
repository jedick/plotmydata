# Using this project name, `docker compose build` creates an image named plotmydata-app
# https://docs.docker.com/compose/how-tos/environment-variables/envvars/#compose_project_name
name: plotmydata

services:

  # Service name (must be lowercase)
  app:
    build:
      # The directory containing the Dockerfile
      context: .
    ports:
      # Expose port for web interface
      - "8080:8080"
    secrets:
      - openai-api-key
    develop:
      # Whenever a file is changed, Compose syncs the file to the container
      watch:
        - action: sync
          path: PlotMyData
          target: /app/PlotMyData

secrets:
  openai-api-key:
    file: secret.openai-api-key
